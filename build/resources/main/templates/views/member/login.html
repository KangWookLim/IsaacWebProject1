<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" href="#">

	<link rel="stylesheet" th:href="@{/css/login/login.css}">
</head>
<form onsubmit="return false;">
	<body>
	<div class="wrap">
	    <div class="log">
	        <h2>Login Page</h2>
	        <div class="ID">
	            <label for="ID">ID </label>
	            <input type="text"  id="ID" name="ID" placeholder="아이디를 입력하십시오.">
	        </div>
	        <div class="PW">
	            <label for="PW">PW </label>
	            <input type="current-password"  id="PW" name="PW" placeholder="패스워드를 입력하십시오.">
	        </div>
	        <div class="loginBtn" id="btn">
	            <button type="button" class="loginBtn" id="loginBtn">Login</button>
	
	            <a th:href="@{/mem/join}" style="margin-top: 10%">회원가입 하시겠습니까?</a>
	        </div>
	
	    </div>
	</div>
	</body>
</form>
<script src="https://code.jquery.com/jquery-3.6.4.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">

<script>
function initEvt() {

    $('#loginBtn').on('click', function(evt){
        login();
    });
}

function validated(){
    const ID = $('#ID');
    const PW = $('#PW');

    if($.trim(ID.val()).length === 0) {
        alert('아이디를 입력하십시오.');
        ID.focus();
        return false;
    }

    if($.trim(PW.val()).length === 0) {
        alert('패스워드를 입력하십시오.');
        PW.focus();
        return false;
    }

    return true;
}

function login() {

    if(validated()) {
        const dataParam = {
            ID : $('#ID').val(),
            PW : $('#PW').val()
        }

        $.ajax({
            url : '/mem/login',
            type : 'post',
            dataType : 'json',
            data : dataParam
        }).done(function(data){
            if(data.resultCode === 200) {
                location.href ="../../../../../../build/generated/sources/annotationProcessor/java/main";
            }else {
                alert('아이디 또는 패스워드를 확인하십시오.');
                return false;
            }
        }).fail(function(xhr, status, error){
            alert('에러코드 : ' + xhr.status);
        });

    }

}

$(document).ready(function(){
    initEvt();
});
</script>
</html>